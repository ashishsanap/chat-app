{"version":3,"sources":["api/chat/chat.socket.js"],"names":["ChatSocket","events","socket","i","eventsLength","length","event","listener","createListener","ChatEvents","on","removeListener","doc","emit"],"mappings":";AACA;;;;;QAOgBA,U,GAAAA,U;;AALhB;;;;;;AAEA;AACA,IAAIC,SAAS,CAAC,MAAD,EAAS,QAAT,CAAb;;AAEO,SAASD,UAAT,CAAoBE,MAApB,EAA4B;AACjC;AACA,OAAI,IAAIC,IAAI,CAAR,EAAWC,eAAeH,OAAOI,MAArC,EAA6CF,IAAIC,YAAjD,EAA+DD,GAA/D,EAAoE;AAClE,QAAIG,QAAQL,OAAOE,CAAP,CAAZ;AACA,QAAII,WAAWC,eAAgB,QAAOF,KAAM,EAA7B,EAAgCJ,MAAhC,CAAf;;AAEAO,mBAAWC,EAAX,CAAcJ,KAAd,EAAqBC,QAArB;AACAL,WAAOQ,EAAP,CAAU,YAAV,EAAwBC,eAAeL,KAAf,EAAsBC,QAAtB,CAAxB;AACD;AACF;;AAGD,SAASC,cAAT,CAAwBF,KAAxB,EAA+BJ,MAA/B,EAAuC;AACrC,SAAO,UAASU,GAAT,EAAc;AACnBV,WAAOW,IAAP,CAAYP,KAAZ,EAAmBM,GAAnB;AACD,GAFD;AAGD;;AAED,SAASD,cAAT,CAAwBL,KAAxB,EAA+BC,QAA/B,EAAyC;AACvC,SAAO,YAAW;AAChBE,mBAAWE,cAAX,CAA0BL,KAA1B,EAAiCC,QAAjC;AACD,GAFD;AAGD","file":"chat.socket.js","sourcesContent":["\n'use strict';\n\nimport ChatEvents from './chat.events';\n\n// Model events to emit\nvar events = ['save', 'remove'];\n\nexport function ChatSocket(socket) {\n  // Bind model events to socket events\n  for(var i = 0, eventsLength = events.length; i < eventsLength; i++) {\n    var event = events[i];\n    var listener = createListener(`Chat:${event}`, socket);\n\n    ChatEvents.on(event, listener);\n    socket.on('disconnect', removeListener(event, listener));\n  }\n}\n\n\nfunction createListener(event, socket) {\n  return function(doc) {\n    socket.emit(event, doc);\n  };\n}\n\nfunction removeListener(event, listener) {\n  return function() {\n    ChatEvents.removeListener(event, listener);\n  };\n}"]}